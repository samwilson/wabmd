{% extends "base.html.twig" %}

{% block main %}

<div class="container">

    <h1>{{type|title}} in {{year}}</h1>

    <table class="table table-hover">
        <thead>
            <tr>
                <th>Registration year &amp;&nbsp;number</th>
                <th>Registration district</th>
                <th>Surname</th>
                <th>Given names</th>
                <th>Gender</th>
                {% if type == 'births' %}
                    <th>Mother</th>
                    <th>Father</th>
                    <th>Birth place</th>
                {% elseif type == 'marriages' %}
                    <th>Spouse surname</th>
                    <th>Spouse given names</th>
                    <th>Spouse gender</th>
                    <th>Marriage place</th>
                {% elseif type == 'deaths' %}
                    <th>Gender</th>
                    <th>Age</th>
                    <th>Father</th>
                    <th>Death place</th>
                {% endif %}
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for y, data in year_data %}
                <tr>
                    <td>
                        <a href="{{path('record',{type:type_singular, year:data.registration_year, num:data.registration_number})}}">
                            {{data.registration_year}}/{{data.registration_number}}
                        </a>
                    </td>
                    <td>{{data.registration_district}}</td>
                    <td>{{data.surname}}</td>
                    <td>{{data.given_names}}</td>
                    {% if type == 'births' %}
                        <td>{{data.gender}}</td>
                        <td>{{data.mother}}</td>
                        <td>{{data.father}}</td>
                        <td>{{data.birth_place}}</td>
                    {% elseif type == 'marriages' %}
                        <td>{{data.gender1}}</td>
                        <td>{{data.spouse_surname}}</td>
                        <td>{{data.spouse_given_names}}</td>
                        <td>{{data.gender2}}</td>
                        <td>{{data.marriage_place}}</td>
                    {% elseif type == 'deaths' %}
                        <td>{{data.gender}}</td>
                        <td>{{data.age}}</td>
                        <td>{{data.mother}}</td>
                        <td>{{data.father}}</td>
                        <td>{{data.death_place}}</td>
                    {% endif %}
                    <td>
                        <form action="https://www.wikitree.com/wiki/Special:SearchPerson" method="post" target="_blank">
                            <input type="hidden" name="wpSearch" value="1" />
                            <input type="hidden" name="wpFirst" value="{{data.given_names}}" />
                            <input type="hidden" name="wpLast" value="{{data.surname}}" />
                            {% if type == 'births' %}
                                <input type="hidden" name="wpBirthDate" value="{{year}}" />
                                <input type="hidden" name="birth_location" value="{{data.birth_place}}" />
                            {% endif %}
                            {% if type == 'deaths' %}
                                <input type="hidden" name="wpDeathDate" value="{{year}}" />
                                <input type="hidden" name="death_location" value="{{data.death_place}}" />
                            {% endif %}
                            {#
                            <input type="hidden" name="father_first_name" value="" />
                            <input type="hidden" name="father_last_name" value="" />
                            <input type="hidden" name="mother_first_name" value="" />
                            <input type="hidden" name="mother_last_name" value="" />
                            <input type="hidden" name="date_spread" value="2" />
                            <input type="hidden" name="date_include" value="neither" />
                            <input type="hidden" name="last_name_match" value="all" />
                            <input type="hidden" name="skip_variants" value="0" />
                            <input type="hidden" name="watchlist" value="any" />
                            #}
                            <input type="submit" value="Search WikiTree" />
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
